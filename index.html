<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern E-Commerce Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .product-card {
            transition: all 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .modal {
            transition: opacity 0.3s ease;
        }
        .cart-item-enter {
            animation: cartItemEnter 0.3s ease-out;
        }
        @keyframes cartItemEnter {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .skeleton-loader {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation Bar -->
    <nav class="bg-white shadow-md py-4 px-6 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <h1 class="text-2xl font-bold text-indigo-600">ShopEasy</h1>
            </div>
            <div class="flex items-center space-x-6">
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition">Home</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition">Products</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition">About</a>
                <a href="#" class="text-gray-700 hover:text-indigo-600 transition">Contact</a>
            </div>
            <div class="flex items-center space-x-4">
                <button id="cartButton" class="relative text-gray-700 hover:text-indigo-600 transition">
                    <i class="fas fa-shopping-cart text-xl"></i>
                    <span id="cartCount" class="absolute -top-2 -right-2 bg-indigo-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
                <button class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition">Login</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-16">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold mb-4">Welcome to ShopEasy</h2>
            <p class="text-xl mb-8">Discover amazing products at unbeatable prices</p>
            <button class="bg-white text-indigo-600 px-6 py-3 rounded-md font-medium hover:bg-gray-100 transition">Shop Now</button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-12 px-6">
        <!-- Category Filter -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Filter by Category</h3>
            <div class="flex flex-wrap gap-2">
                <button class="category-filter px-4 py-2 border border-gray-300 rounded-md hover:bg-indigo-50 transition" data-category="all">All</button>
                <button class="category-filter px-4 py-2 border border-gray-300 rounded-md hover:bg-indigo-50 transition" data-category="electronics">Electronics</button>
                <button class="category-filter px-4 py-2 border border-gray-300 rounded-md hover:bg-indigo-50 transition" data-category="clothing">Clothing</button>
                <button class="category-filter px-4 py-2 border border-gray-300 rounded-md hover:bg-indigo-50 transition" data-category="home">Home & Kitchen</button>
            </div>
        </div>

        <!-- Search -->
        <div class="mb-8">
            <div class="relative max-w-md">
                <input type="text" id="searchInput" placeholder="Search products..." class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <button class="absolute right-2 top-2 text-gray-500 hover:text-indigo-600">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>

        <!-- Product Grid -->
        <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
            <!-- Products will be loaded here via JavaScript -->
        </div>

        <!-- Loading Skeleton -->
        <div id="loadingSkeleton" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
            <div class="skeleton-loader rounded-lg h-80"></div>
            <div class="skeleton-loader rounded-lg h-80"></div>
            <div class="skeleton-loader rounded-lg h-80"></div>
            <div class="skeleton-loader rounded-lg h-80"></div>
        </div>
    </main>

    <!-- Product Details Modal -->
    <div id="productModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden transition-opacity duration-300">
        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="relative">
                <button id="closeModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 bg-white rounded-full p-2 shadow-md">
                    <i class="fas fa-times"></i>
                </button>
                <div class="grid md:grid-cols-2 gap-6 p-6">
                    <div class="md:sticky md:top-6">
                        <img id="modalProductImage" src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a9919402-1f43-401d-bd8b-a6ac957f55a9.png" alt="Product image showing full details of currently selected item" class="w-full rounded-lg object-cover">
                        <div class="grid grid-cols-4 gap-2 mt-4">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/7f9cb3b3-25ae-43d5-b285-cbf4c3fe9242.png" alt="Alternative view 1 of product" class="cursor-pointer hover:ring-2 hover:ring-indigo-500 rounded-md">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/99815ee3-c3db-4b7f-bd93-50190c02f496.png" alt="Alternative view 2 of product" class="cursor-pointer hover:ring-2 hover:ring-indigo-500 rounded-md">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/245428fe-546d-406e-9d68-0b371fe976c1.png" alt="Alternative view 3 of product" class="cursor-pointer hover:ring-2 hover:ring-indigo-500 rounded-md">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/0be32f6f-631d-4739-919e-666a22432a2f.png" alt="Alternative view 4 of product" class="cursor-pointer hover:ring-2 hover:ring-indigo-500 rounded-md">
                        </div>
                    </div>
                    <div>
                        <h2 id="modalProductTitle" class="text-2xl font-bold text-gray-900 mb-2"></h2>
                        <div class="flex items-center mb-4">
                            <div class="flex text-yellow-400 mr-2">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span class="text-gray-600">(42 reviews)</span>
                        </div>
                        <p id="modalProductPrice" class="text-3xl font-bold text-gray-900 mb-4"></p>
                        <p id="modalProductDescription" class="text-gray-700 mb-6"></p>
                        <div class="flex items-center mb-6 space-x-4">
                            <div class="flex items-center border border-gray-300 rounded-md">
                                <button class="quantity-btn px-3 py-1 text-xl" data-action="decrease">-</button>
                                <span id="quantityValue" class="px-4 py-1 border-l border-r border-gray-300">1</span>
                                <button class="quantity-btn px-3 py-1 text-xl" data-action="increase">+</button>
                            </div>
                            <span id="modalProductStock" class="text-sm text-gray-500"></span>
                        </div>
                        <div class="space-y-4">
                            <button id="addToCartModal" class="w-full bg-indigo-600 text-white py-3 rounded-md hover:bg-indigo-700 transition flex items-center justify-center">
                                <i class="fas fa-cart-plus mr-2"></i> Add to Cart
                            </button>
                            <button class="w-full bg-gray-100 text-indigo-600 py-3 rounded-md hover:bg-gray-200 transition flex items-center justify-center">
                                <i class="fas fa-heart mr-2"></i> Add to Wishlist
                            </button>
                        </div>
                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900 mb-2">Product Details</h3>
                            <ul id="productDetails" class="text-gray-700 space-y-2">
                                <!-- Details will be filled via JS -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div id="cartSidebar" class="fixed inset-y-0 right-0 w-full sm:w-96 bg-white shadow-lg z-50 transform translate-x-full transition-transform duration-300">
        <div class="h-full flex flex-col">
            <div class="flex justify-between items-center p-4 border-b border-gray-200">
                <h3 class="text-lg font-medium">Your Cart (<span id="sidebarCartCount">0</span>)</h3>
                <button id="closeCart" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="cartItemsContainer" class="flex-1 overflow-y-auto p-4 space-y-4">
                <!-- Cart items will be added here -->
                <div class="text-center py-12 text-gray-500" id="emptyCartMessage">
                    <i class="fas fa-shopping-cart text-4xl mb-4"></i>
                    <p>Your cart is empty</p>
                </div>
            </div>
            <div class="border-t border-gray-200 p-4">
                <div class="flex justify-between mb-4">
                    <span class="text-gray-600">Subtotal</span>
                    <span id="cartSubtotal" class="font-medium">$0.00</span>
                </div>
                <button id="checkoutButton" class="w-full bg-indigo-600 text-white py-3 rounded-md hover:bg-indigo-700 transition">
                    Checkout
                </button>
                <p class="text-xs text-gray-500 mt-2 text-center">
                    or <button id="continueShopping" class="text-indigo-600 hover:underline">Continue Shopping</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-bold text-gray-900 mb-4">Checkout</h3>
            <p class="text-gray-700 mb-6">Thank you for your purchase!</p>
            <div class="border-t border-gray-200 pt-4">
                <div class="flex justify-between mb-2">
                    <span class="text-gray-600">Subtotal:</span>
                    <span id="checkoutSubtotal" class="font-medium">$0.00</span>
                </div>
                <div class="flex justify-between mb-2">
                    <span class="text-gray-600">Shipping:</span>
                    <span class="font-medium">$5.99</span>
                </div>
                <div class="flex justify-between font-bold text-lg">
                    <span>Total:</span>
                    <span id="checkoutTotal">$5.99</span>
                </div>
            </div>
            <button id="confirmCheckout" class="w-full bg-indigo-600 text-white py-3 rounded-md hover:bg-indigo-700 transition mt-6">
                Confirm Order
            </button>
        </div>
    </div>

    <script>
        // Mock product data
        const products = [
            {
                id: 1,
                title: "Wireless Bluetooth Headphones",
                price: 89.99,
                category: "electronics",
                description: "Premium wireless headphones with noise cancellation and 30-hour battery life. Perfect for music lovers and frequent travelers.",
                stock: 15,
                rating: 4.5,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a7b8f405-8711-4fe3-a197-6cb5b2bcb3f9.png",
                details: [
                    "Brand: SoundMaster",
                    "Color: Black",
                    "Connectivity: Bluetooth 5.0",
                    "Battery Life: 30 hours",
                    "Noise Cancellation: Yes"
                ]
            },
            {
                id: 2,
                title: "Organic Cotton T-Shirt",
                price: 24.99,
                category: "clothing",
                description: "Soft, breathable organic cotton t-shirt available in multiple colors. Machine washable and eco-friendly.",
                stock: 42,
                rating: 4.2,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/4534e394-2100-4f7a-9c5a-f52f62470efb.png",
                details: [
                    "Material: 100% Organic Cotton",
                    "Colors: White, Black, Gray, Blue",
                    "Care: Machine wash cold",
                    "Fit: Regular",
                    "Origin: Ethically sourced"
                ]
            },
            {
                id: 3,
                title: "Smartphone Stand",
                price: 19.99,
                category: "electronics",
                description: "Adjustable smartphone stand for hands-free viewing at the perfect angle. Works with all smartphones.",
                stock: 28,
                rating: 4.3,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/bc3ac2a4-6773-456a-8e19-9045abb09243.png",
                details: [
                    "Material: Silicone base with aluminum arm",
                    "Compatibility: All smartphones",
                    "Adjustable Angle: 30-75 degrees",
                    "Non-slip base",
                    "Portable design"
                ]
            },
            {
                id: 4,
                title: "Ceramic Coffee Mug Set",
                price: 32.99,
                category: "home",
                description: "Set of 4 premium ceramic coffee mugs with elegant designs. Microwave and dishwasher safe.",
                stock: 18,
                rating: 4.7,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/5e3aa0df-65cd-47f6-b0e7-e6cfb794adc7.png",
                details: [
                    "Material: High-quality ceramic",
                    "Capacity: 12oz each",
                    "Set of 4 mugs",
                    "Dishwasher and microwave safe",
                    "Ergonomic handle design"
                ]
            },
            {
                id: 5,
                title: "Fitness Tracker",
                price: 59.99,
                category: "electronics",
                description: "Advanced fitness tracker with heart rate monitor, step counter, and sleep analysis. Water-resistant design.",
                stock: 23,
                rating: 4.4,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/eeedbfd0-d255-431a-8667-b321290e26c6.png",
                details: [
                    "Display: OLED touchscreen",
                    "Battery Life: 7 days",
                    "Water Resistance: 5ATM",
                    "Tracking: Steps, heart rate, sleep",
                    "Connectivity: Bluetooth 4.0"
                ]
            },
            {
                id: 6,
                title: "Denim Jeans",
                price: 49.99,
                category: "clothing",
                description: "Classic fit denim jeans with stretch for comfort. Available in multiple washes and sizes.",
                stock: 36,
                rating: 4.1,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/28cbf19a-274b-403f-aedd-9edc312ebcf9.png",
                details: [
                    "Material: 98% Cotton, 2% Spandex",
                    "Fit: Classic straight",
                    "Closure: Button fly with zip",
                    "Pockets: 5 (2 front, 2 back, 1 coin)",
                    "Care: Machine wash cold"
                ]
            },
            {
                id: 7,
                title: "Air Fryer",
                price: 119.99,
                category: "home",
                description: "Digital air fryer with 5.8L capacity and 8 preset cooking functions. Healthy frying with little to no oil.",
                stock: 12,
                rating: 4.6,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/e98d4a20-bcaf-4d98-a1e1-e3fbc2c23225.png",
                details: [
                    "Capacity: 5.8 liters",
                    "Power: 1700W",
                    "Temperature Range: 80°C-200°C",
                    "Timer: Up to 60 minutes",
                    "Presets: 8 cooking functions"
                ]
            },
            {
                id: 8,
                title: "Leather Wallet",
                price: 39.99,
                category: "clothing",
                description: "Genuine leather wallet with multiple card slots and ID window. RFID blocking technology included.",
                stock: 21,
                rating: 4.4,
                image: "https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/363601e9-a8ef-4cdd-b69d-4f54183c1700.png",
                details: [
                    "Material: 100% Genuine Leather",
                    "Color: Brown",
                    "Capacity: 12 card slots, 2 ID windows",
                    "RFID Blocking: Yes",
                    "Dimensions: 4.25 x 3.5 inches"
                ]
            }
        ];

        // DOM elements
        const productsGrid = document.getElementById('productsGrid');
        const loadingSkeleton = document.getElementById('loadingSkeleton');
        const cartButton = document.getElementById('cartButton');
        const cartCount = document.getElementById('cartCount');
        const cartSidebar = document.getElementById('cartSidebar');
        const closeCart = document.getElementById('closeCart');
        const cartItemsContainer = document.getElementById('cartItemsContainer');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const cartSubtotal = document.getElementById('cartSubtotal');
        const checkoutButton = document.getElementById('checkoutButton');
        const continueShopping = document.getElementById('continueShopping');
        const sidebarCartCount = document.getElementById('sidebarCartCount');
        const productModal = document.getElementById('productModal');
        const closeModal = document.getElementById('closeModal');
        const modalProductImage = document.getElementById('modalProductImage');
        const modalProductTitle = document.getElementById('modalProductTitle');
        const modalProductPrice = document.getElementById('modalProductPrice');
        const modalProductDescription = document.getElementById('modalProductDescription');
        const modalProductStock = document.getElementById('modalProductStock');
        const productDetails = document.getElementById('productDetails');
        const addToCartModal = document.getElementById('addToCartModal');
        const quantityValue = document.getElementById('quantityValue');
        const quantityBtns = document.querySelectorAll('.quantity-btn');
        const categoryFilters = document.querySelectorAll('.category-filter');
        const searchInput = document.getElementById('searchInput');
        const checkoutModal = document.getElementById('checkoutModal');
        const confirmCheckout = document.getElementById('confirmCheckout');
        const checkoutSubtotal = document.getElementById('checkoutSubtotal');
        const checkoutTotal = document.getElementById('checkoutTotal');

        // Shopping cart
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentProduct = null;

        // Initialize the app
        function init() {
            renderProducts();
            updateCartCount();
            setupEventListeners();
        }

        // Render products to the grid
        function renderProducts(filteredProducts = products) {
            loadingSkeleton.classList.add('hidden');
            productsGrid.innerHTML = '';

            if (filteredProducts.length === 0) {
                productsGrid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500"><p>No products found matching your criteria</p></div>';
                return;
            }

            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition';
                productCard.innerHTML = `
                    <div class="relative">
                        <img src="${product.image}" alt="${product.title}" class="w-full h-48 object-cover">
                        ${product.stock < 5 ? '<span class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded">Low Stock</span>' : ''}
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start">
                            <h3 class="font-medium text-gray-900 mb-1">${product.title}</h3>
                            <span class="text-indigo-600 font-bold">$${product.price.toFixed(2)}</span>
                        </div>
                        <div class="flex items-center mb-2">
                            <div class="flex text-yellow-400 text-xs mr-1">
                                ${renderStars(product.rating)}
                            </div>
                            <span class="text-gray-500 text-xs">(${Math.floor(Math.random() * 100)})</span>
                        </div>
                        <p class="text-gray-500 text-sm mb-3 line-clamp-2">${product.description}</p>
                        <button class="view-details w-full bg-gray-100 text-gray-800 py-2 rounded-md hover:bg-gray-200 transition text-sm" data-id="${product.id}">
                            View Details
                        </button>
                        <button class="add-to-cart mt-2 w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition text-sm" data-id="${product.id}">
                            <i class="fas fa-cart-plus mr-1"></i> Add to Cart
                        </button>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        }

        // Helper function to render star ratings
        function renderStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        // Set up event listeners
        function setupEventListeners() {
            // Cart toggle
            cartButton.addEventListener('click', toggleCart);
            closeCart.addEventListener('click', toggleCart);
            continueShopping.addEventListener('click', toggleCart);

            // Product modal
            closeModal.addEventListener('click', () => {
                productModal.classList.add('hidden');
            });

            // Quantity buttons
            quantityBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    let quantity = parseInt(quantityValue.textContent);
                    if (btn.dataset.action === 'increase') {
                        quantityValue.textContent = quantity + 1;
                    } else if (btn.dataset.action === 'decrease' && quantity > 1) {
                        quantityValue.textContent = quantity - 1;
                    }
                });
            });

            // Add to cart from modal
            addToCartModal.addEventListener('click', () => {
                if (!currentProduct) return;
                const quantity = parseInt(quantityValue.textContent);
                addToCart(currentProduct.id, quantity);
                productModal.classList.add('hidden');
            });

            // Category filters
            categoryFilters.forEach(filter => {
                filter.addEventListener('click', () => {
                    categoryFilters.forEach(f => f.classList.remove('bg-indigo-600', 'text-white'));
                    const category = filter.dataset.category;
                    if (category === 'all') {
                        renderProducts(products);
                        filter.classList.add('bg-indigo-600', 'text-white');
                        return;
                    }
                    filter.classList.add('bg-indigo-600', 'text-white');
                    const filteredProducts = products.filter(p => p.category === category);
                    renderProducts(filteredProducts);
                });
            });

            // Search functionality
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                if (searchTerm.length < 2) {
                    renderProducts(products);
                    return;
                }
                const filteredProducts = products.filter(p => 
                    p.title.toLowerCase().includes(searchTerm) || 
                    p.description.toLowerCase().includes(searchTerm) ||
                    p.category.toLowerCase().includes(searchTerm)
                );
                renderProducts(filteredProducts);
            });

            // Checkout flow
            checkoutButton.addEventListener('click', () => {
                if (cart.length === 0) return;
                showCheckoutModal();
            });

            confirmCheckout.addEventListener('click', () => {
                checkoutModal.classList.add('hidden');
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                renderCartItems();
                showOrderConfirmation();
            });

            // Hide loading skeleton after short delay (simulated loading)
            setTimeout(() => {
                loadingSkeleton.classList.add('hidden');
                renderProducts();
            }, 800);
        }

        // Toggle cart sidebar
        function toggleCart() {
            cartSidebar.classList.toggle('translate-x-full');
            if (!cartSidebar.classList.contains('translate-x-full')) {
                renderCartItems();
            }
        }

        // Render cart items
        function renderCartItems() {
            cartItemsContainer.innerHTML = '';
            
            if (cart.length === 0) {
                emptyCartMessage.classList.remove('hidden');
                cartSubtotal.textContent = '$0.00';
                return;
            }
            
            emptyCartMessage.classList.add('hidden');
            
            let subtotal = 0;
            
            cart.forEach(item => {
                const product = products.find(p => p.id === item.productId);
                if (!product) return;
                
                subtotal += product.price * item.quantity;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item-enter bg-white p-4 rounded-lg border border-gray-200 flex items-center';
                cartItem.innerHTML = `
                    <img src="${product.image}" alt="${product.title}" class="w-16 h-16 object-cover rounded-md mr-4">
                    <div class="flex-1">
                        <h4 class="font-medium text-gray-900">${product.title}</h4>
                        <p class="text-gray-600 text-sm">$${product.price.toFixed(2)} × ${item.quantity}</p>
                        <div class="flex items-center mt-1">
                            <button class="quantity-btn-cart text-xs px-2 py-1 border border-gray-300 rounded mr-2" data-id="${product.id}" data-action="decrease">-</button>
                            <span class="text-sm">${item.quantity}</span>
                            <button class="quantity-btn-cart text-xs px-2 py-1 border border-gray-300 rounded ml-2" data-id="${product.id}" data-action="increase">+</button>
                        </div>
                    </div>
                    <div class="ml-4 text-right">
                        <p class="font-medium">$${(product.price * item.quantity).toFixed(2)}</p>
                        <button class="remove-item text-red-500 text-sm mt-2" data-id="${product.id}">Remove</button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItem);
            });
            
            cartSubtotal.textContent = `$${subtotal.toFixed(2)}`;
            checkoutSubtotal.textContent = `$${subtotal.toFixed(2)}`;
            checkoutTotal.textContent = `$${(subtotal + 5.99).toFixed(2)}`;
            
            // Add event listeners to dynamically created buttons
            document.querySelectorAll('.quantity-btn-cart').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = parseInt(btn.dataset.id);
                    const action = btn.dataset.action;
                    updateCartQuantity(productId, action);
                });
            });
            
            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = parseInt(btn.dataset.id);
                    removeFromCart(productId);
                });
            });
        }

        // Update cart quantity
        function updateCartQuantity(productId, action) {
            const itemIndex = cart.findIndex(item => item.productId === productId);
            if (itemIndex === -1) return;
            
            if (action === 'increase') {
                cart[itemIndex].quantity += 1;
            } else if (action === 'decrease') {
                if (cart[itemIndex].quantity > 1) {
                    cart[itemIndex].quantity -= 1;
                } else {
                    cart.splice(itemIndex, 1);
                }
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
        }

        // Remove from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.productId !== productId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
        }

        // Add to cart
        function addToCart(productId, quantity = 1) {
            const existingItem = cart.find(item => item.productId === productId);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    productId: productId,
                    quantity: quantity
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            
            // Show success animation
            const cartIcon = cartButton.querySelector('i');
            cartIcon.classList.add('animate-bounce');
            setTimeout(() => {
                cartIcon.classList.remove('animate-bounce');
            }, 1000);
        }

        // Update cart count
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = count;
            sidebarCartCount.textContent = count;
        }

        // Show product details modal
        function showProductDetails(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            currentProduct = product;
            modalProductImage.src = product.image;
            modalProductTitle.textContent = product.title;
            modalProductPrice.textContent = `$${product.price.toFixed(2)}`;
            modalProductDescription.textContent = product.description;
            modalProductStock.textContent = `${product.stock} items in stock`;
            quantityValue.textContent = '1';
            
            // Populate product details
            productDetails.innerHTML = '';
            product.details.forEach(detail => {
                const li = document.createElement('li');
                li.className = 'flex';
                li.innerHTML = `<span class="text-gray-500 w-24">${detail.split(':')[0]}:</span><span>${detail.split(':')[1]}</span>`;
                productDetails.appendChild(li);
            });
            
            productModal.classList.remove('hidden');
        }

        // Show checkout modal
        function showCheckoutModal() {
            checkoutModal.classList.remove('hidden');
        }

        // Show order confirmation
        function showOrderConfirmation() {
            const confirmation = document.createElement('div');
            confirmation.className = 'fixed bottom9-4 right-4 bg-green-500 text-white px-6 py-3 rounded-md shadow-lg flex items-center';
            confirmation.innerHTML = `
                <i class="fas fa-check-circle mr-2"></i> Order placed successfully!
            `;
            document.body.appendChild(confirmation);
            
            setTimeout(() => {
                confirmation.remove();
            }, 3000);
        }

        // Handle clicks on product cards (event delegation)
        document.addEventListener('click', (e) => {
            // View details button
            if (e.target.classList.contains('view-details') || e.target.closest('.view-details')) {
                const button = e.target.classList.contains('view-details') ? e.target : e.target.closest('.view-details');
                const productId = parseInt(button.dataset.id);
                showProductDetails(productId);
            }
            
            // Add to cart button
            if (e.target.classList.contains('add-to-cart') || e.target.closest('.add-to-cart')) {
                const button = e.target.classList.contains('add-to-cart') ? e.target : e.target.closest('.add-to-cart');
                const productId = parseInt(button.dataset.id);
                addToCart(productId);
            }
        });

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>

```